# 概览

通过资源栈组功能，您可以使用管理员账号定义和管理ROS模板，并将模板作为预置资源栈的基础，对多个账号和地域下的资源栈进行统一管理，简化工作流程和维护成本。

## 资源栈组

通过资源栈组，可使用一个ROS模板在多个阿里云账号中跨地域创建资源栈。每个资源栈中包含的所有资源由资源栈组的ROS模板定义。在创建资源栈组时，需要指定模板，以及模板所需的任何参数和功能。

在定义资源栈组后，您可以在指定的目标账号和地域中创建、更新或删除资源栈。在这个操作过程中，您还可以指定操作首选项。例如：可以指定对资源栈并行执行操作的账号数量、执行操作地域的顺序和容错能力 （如果超出容错能力，资源栈操作自动停止） 。

资源栈组和地域相关，如果您在某个地域（例如：cn-hangzhou）中创建了资源栈组，只能在该地域进行查看或更改。

## 资源栈实例

资源栈实例是对特定地域内目标账号中资源栈的引用。一个资源栈实例对应一个资源栈，但也可能出现资源栈实例存在，而对应的资源栈不存在的情况。例如，如果您因为某些原因无法创建资源栈，则资源栈实例将显示资源栈创建失败的原因。一个资源栈实例只属于一个资源栈组。

资源栈组、资源栈操作和资源栈之间的逻辑关系如下图所示。当您更新资源栈组时，将在所有账号和地域中更新所有关联的资源栈实例。

![资源栈实例](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4546119951/p98028.png)

## 账号

与资源栈组相关的账号如下：

-   管理员账号

    用来创建资源栈组的阿里云账号。登录管理员账号后，可创建资源栈组，以及资源栈组中的资源栈实例。每个资源栈实例所对应的资源栈均创建在目标账号的特定地域中。

-   目标账号

    用来创建、更新或删除资源栈组中的一个或多个资源栈的账号。必须先在管理员账号与目标账号之间设置信任关系，然后才能使用资源栈组在目标账号中创建资源栈。管理员账号同时也可以是目标账号。


## 资源栈组、资源栈实例、资源栈、地域和账号的关系图

资源栈组、资源栈实例、资源栈、地域和账号的关系如下图所示。

![关系图](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4546119951/p98041.png)

-   资源栈组区分地域。您在杭州地域创建的资源栈组，在北京地域无法看到。
-   资源栈组跨账号和跨地域。例如：资源栈组是由管理员账号（账号A）创建的，可以在资源栈组中创建多个资源栈实例，创建资源栈实例时可以指定账号和地域。账号A创建的资源栈组中，在杭州地域给账号B和C分别创建资源栈实例1和2，在北京地域给账号C创建资源栈实例3。
-   资源栈实例是对资源栈的引用。
    -   创建资源栈实例时会相应的创建出资源栈。
    -   删除资源栈实例时可选择删除或保留它所指向的资源栈。
    -   直接删除资源栈则不会删除资源栈实例。

## 资源栈组部署选项

在创建资源栈组、更新资源栈组、添加资源栈实例、删除资源栈组中资源栈时，可以配置如下资源栈组参数：

-   最大账号并发数或最大账号并发百分比

    您可以指定一次操作的目标账号的最大数量或百分比。例如，如果您将资源栈部署到2个地域内的5个目标账号，将最大账号并发数（MaxConcurrentCount）设置为3，或将最大账号并发百分比（MaxConcurrentPercentage）设置为60，则将在第一个地域为前3个账号部署资源栈，完成后在第一个地域为另外2个账号部署资源栈，随后转入下一个地域进行同样的操作。

    如果指定的最大账号并发百分比（MaxConcurrentPercentage）不表示目标账号的数量，则ROS会向下取整。例如：如果您将资源栈部署到5个目标账户，并将最大账号并发百分比（MaxConcurrentPercentage）设置为50，则ROS会同时部署2个资源栈。

-   失败容错数或失败容错百分比

    您可以指定某次操作时，每个地域中允许资源栈操作失败的最大数量或百分比，如果超出此值，ROS就会自动停止本次操作。例如：您需要在2个地域内，5个目标账号下创建资源栈，将失败容错数（FailureToleranceCount）设置为2或将失败容错百分比（FailureTolerancePercentage）设置为40，如果某个地域中有第3个目标账号创建资源栈失败，则ROS将停止本次操作，本次操作的结果为失败；如果两个地域内创建资源栈失败的目标账号的数量都不大于2，则ROS认为本次操作结果为成功。

    如果指定的失败容错百分比（FailureTolerancePercentage）不表示目标账号的数量，则ROS会向下取整。例如，如果您将资源栈部署到5个目标账户，并将失败容错百分比（FailureTolerancePercentage）设置为50，则ROS允许最多2个目标账户创建资源栈失败。


配置以上参数有助于控制时间和允许的失败次数，以便成功执行资源栈组操作并防止您丢失资源栈。

## 相关内容

资源栈组的相关内容如下表所示。

|内容|描述|
|--|--|
|[授权资源栈组操作权限](/intl.zh-CN/资源栈组/授权资源栈组操作权限.md)|在使用资源栈组前，您需要赋予资源编排服务必要的权限，并准备好对应角色。|
|[创建资源栈组](/intl.zh-CN/资源栈组/创建资源栈组.md)|创建资源栈组时，指定要用于创建资源栈的ROS模板、部署资源栈的目标账号和地域等，可确保将具有相同配置的相同资源栈部署到多个指定地域内的多个指定目标账号。|
|[添加资源栈实例](/intl.zh-CN/资源栈组/添加资源栈实例.md)|在资源栈组中，您可通过指定目标账号和地域来添加资源栈实例。|
|[更新资源栈组](/intl.zh-CN/资源栈组/更新资源栈组.md)|当您需要修改资源栈组的模板、参数、管理员角色、目标账户、区域等信息时，可以通过更新资源栈组来实现。|
|[覆盖资源栈组值](/intl.zh-CN/资源栈组/覆盖资源栈组值.md)|当您需要修改资源栈组中资源栈的参数值时，可以通过覆盖资源栈组值来实现。|
|[删除资源栈组](/intl.zh-CN/资源栈组/删除资源栈组.md)|当您不需要资源栈组以及其资源栈时，可以从指定地域内的指定目标账号中删除资源栈及其所有关联资源。|
|[资源栈组和资源栈实例状态码](/intl.zh-CN/资源栈组/资源栈组和资源栈实例状态码.md)|ROS为资源栈组操作和资源栈实例操作生成的状态代码。|

