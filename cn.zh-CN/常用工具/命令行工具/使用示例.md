# 使用示例 {#concept_57847_zh .concept}

## ROS {#section_dkz_plx_kfb .section}

注意：阿里云云产品的API分为RPC和RESTful两种类型，本文主要调用RESTful API完成示例介绍，建议调用RESTful API完成ROS的相关动作。

安装配置 aliyun-ros-cli后，输入 aliyun ros 使用本工具。查看帮助信息

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros --help
```

本文介绍`ros`如下的一级命令：

|命令|功能|
|--|--|
|`CreateStacks`|创建资源栈|
|`DeleteStack`|删除资源栈|
|`UpdateStack`|更新资源栈|
|`PreviewStack`|预览资源栈|
|`AbandonStack`|废弃资源栈|
|`DescribeStacks`|查询所有资源栈|
|`DescribeStackDetail`|查询资源栈详情|
|`DescribeResources`|查询资源栈资源信息|
|`DescribeResourceTypes`|查询所有可用的资源类型|
|`DescribeResourceTypeDetail`|查询资源类型详情|
|`DescribeResourceTypeTemplate`|查询资源类型模版|
|`DescribeTemplate`|查询资源栈模版|
|`ValidateTemplate`|验证模版|
|`DescribeRegions`|查询所有的区域|
|`DescribeEvents`|查询资源栈事件|

查看一级命令帮助信息

``` {#codeblock_mxt_4ex_3w6 .language-bash}
# aliyun ros [ros_api] --help
aliyun ros CreateStacks --help
```

**body参数**

|名称|类型|是否请求|描述|
|--|--|----|--|
|Name|String|是|资源栈名称。需符合该正则表达式： ^\[a-zA-Z\]\[a-zA-Z0-9\_.-\]\*$；最大长度不超过255个字符。|
|Template|JSON|是|JSON 格式的资源栈模板。目前默认最大为 512KB。该配置值可调。|
|Parameters|JSON|是|创建资源栈所需要的参数。需要在模板中定义 key。|
|DisableRollback|Boolean|否|当创建资源栈失败时，是否禁用回滚策略。True 表示禁用回滚，即在创建资源栈失败时不会进行回滚；False 表示不禁用回滚，即在创建资源栈失败时会进行回滚。|
|TimeoutMins|Integer|是|创建资源栈的超时时间，以分钟为单位，默认值 60。|

## 资源栈相关 {#section_wnm_7jx_or4 .section}

## Create Stack {#section_96n_t5h_ww1 .section}

使用如下命令创建资源栈：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros POST /stacks --body '{
  "Template": [Template],
  "Name": "[StackName]",
  "TimeoutMins": 10
}'
```

创建成功后，返回资源栈名称和ID，否则返回错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /stacks --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'

{
    "Id": "***-**-**-**-***",
    "Name": "ros_test_cli_stack_name"
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /stacks --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'

ERROR: SDK.ServerError
ErrorCode: StackExists
Recommend:
RequestId:
Message: The Stack (ros_test_cli_stack_name) already exists.
```

## Delete Stack {#section_t3j_rn8_5oc .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--RegionId`|指定资源栈所在区域|默认区域是配置凭证时的区域|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令删除资源栈：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros DELETE /stacks/[StackName]/[StackId]
```

删除成功后，提示成功，无返回值，否则返回错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros DELETE /stacks/ros_test_cli_stack_name/***-**-**-**-***
			
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros DELETE /stacks/ros_test_cli_stack_name/***-**-**-**-***

ERROR: SDK.ServerError
ErrorCode: StackNotFound
Recommend:
RequestId:
Message: The Stack (ros_test_cli_stack_name) could not be found.
```

## Update Stack {#section_ect_5lg_e3c .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--StackName`|指定更新资源栈的名称|必须给出|
|`--StackId`|指定更新资源栈的ID|必须给出|

使用如下命令更新资源栈：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros UpdateStack --StackName [StackName] --StackId [StackId] --body '{
  "Template": [Template],
  "TimeoutMins": 10
}'
```

更新成功后，返回资源栈名称和ID，否则返回错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros PUT /stacks/ros_test_cli_stack_name/***-**-**-**-*** --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "TimeoutMins": 10
}'

{
    "Id": "***-**-**-**-***",
    "Name": "ros_test_cli_stack_name"
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros PUT /stacks/ros_test_cli_stack_name/***-**-**-**-*** --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01",
    "Resources": {
      "Eip": {
        "Type": "ALIYUN::VPC::EIP",
        "Properties": {
          "InternetChargeType": "PayByTraffic",
          "Bandwidth": 200
        }
      }
    },
    "Outputs": {
      "EipAddress": {
        "Value": {
          "Fn::GetAtt": [
            "Eip",
            "EipAddress"
          ]
        }
      },
      "AllocationId": {
        "Value": {
          "Fn::GetAtt": [
            "Eip",
            "AllocationId"
          ]
        }
      }
    }
  },
  "DisableRollback": false,
  "TimeoutMins": 10
}'

ERROR: SDK.ServerError
ErrorCode: NotSupported
Recommend:
RequestId:
Message: Updating a stack when it is in (UPDATE, IN_PROGRESS) is not supported.
```

## Preview Stack {#section_kiu_4y0_xvt .section}

使用如下命令预览资源栈：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros POST /stacks/preview --body '{
  "Template": [Template],
  "Name": "[StackName]",
  "TimeoutMins": 10
}'
```

创建成功后，返回模版资源信息，否则返回错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /stacks/preview --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'

{
  "Updated": null,
  "Description": "No description",
  "Parameters": {
    "ALIYUN::StackId": "None",
    "ALIYUN::AccountId": "**************",
    "ALIYUN::StackName": "ros_test_cli_stack_name",
    "ALIYUN::Region": "cn-hangzhou",
    "ALIYUN::NoValue": "None"
  },
  "Created": "2019-07-20T08:56:48.221264",
  "Region": "cn-hangzhou",
  "TemplateDescription": "No description",
  "Webhook": null,
  "Id": "None",
  "DisableRollback": true,
  "TimeoutMins": 10,
  "Resources": [],
  "Name": "ros_test_cli_stack_name"
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /stacks/preview --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01",
    "Resources": {
      "Eip": {
        "Type": "ALIYUN::VPC::EIP",
        "Properties": {
          "InternetChargeType": "PayByTraffic",
          "BandWidth": 200
        }
      }
    },
    "Outputs": {
      "EipAddress": {
        "Value": {
          "Fn::GetAtt": [
            "Eip",
            "EipAddress"
          ]
        }
      },
      "AllocationId": {
        "Value": {
          "Fn::GetAtt": [
            "Eip",
            "AllocationId"
          ]
        }
      }
    }
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'

ERROR: SDK.ServerError
ErrorCode: StackValidationFailed
Recommend:
RequestId:
Message: Property error: : Resources.Eip.Properties: : Unknown Property BandWidth
```

## Abandon Stack {#section_1ff_uwj_a33 .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--RegionId`|指定资源栈所在区域|默认区域是配置凭证时的区域|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令废弃资源栈

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros DELETE /stacks/[StackName]/[StackId]/abandon
```

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros DELETE /stacks/ros_test_cli_stack_name/***-**-**-**-***/abandon

{
  "Status": "COMPLETE",
  "Name": "ros_test_cli_stack_name",
  "ProjectId": "***************",
  "Environment": {
    "ResourceRegistry": {
      "Resources": {}
    },
    "ParameterDefaults": {},
    "Parameters": {}
  },
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "Action": "CREATE",
  "Id": "***-**-**-**-***",
  "Resources": {},
  "StackUserProjectId": null
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros DELETE /stacks/ros_test_cli_stack_name/***-**-**-**-***/abandon

ERROR: SDK.ServerError
ErrorCode: StackNotFound
Recommend:
RequestId:
Message: The Stack (ros_test_cli_stack_name) could not be found.
```

## Describe Stacks {#section_72o_wn8_hjr .section}

使用如下命令查询所有资源栈：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /stacks
```

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks

{
    "TotalCount": 1,
    "PageNumber": 1,
    "Stacks": [
        {
            "Status": "CREATE_COMPLETE",
            "Updated": null,
            "Name": "ros_test_cli_stack_name",
            "Created": "2019-07-19T17:00:36",
            "Region": "cn-hangzhou",
            "StatusReason": "Stack CREATE completed successfully",
            "Id": "***-**-**-**-***",
            "DisableRollback": true,
            "TimeoutMins": 60
        }
    ],
    "PageSize": 1
}
```

## Describe Stack Detail {#section_kzr_vbk_cvj .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令查询资源栈详细信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /stacks/[StackName]/[StackId]
```

成功后输出资源栈详细信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***

{
    "Status": "CREATE_COMPLETE",
    "Updated": null,
    "Description": "No description",
    "Parameters": {
        "ALIYUN::StackId": "***-**-**-**-***",
        "ALIYUN::AccountId": "******************",
        "ALIYUN::StackName": "ros_test_cli_stack_name",
        "ALIYUN::Region": "cn-hangzhou",
        "ALIYUN::NoValue": "None"
    },
    "Created": "2019-07-19T13:43:37",
    "Outputs": [],
    "Region": "cn-hangzhou",
    "TemplateDescription": "No description",
    "Webhook": null,
    "StatusReason": "Stack CREATE completed successfully",
    "Id": "[stack_id]",
    "DisableRollback": true,
    "TimeoutMins": 10,
    "Name": "ros_test_cli_stack_name"
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***

ERROR: SDK.ServerError
ErrorCode: StackNotFound
Recommend:
RequestId:
Message: The Stack (ros_test_cli_stack_name) could not be found.
```

## 资源相关 {#section_g0v_rhg_0j4 .section}

## Decribe Resources {#section_rtl_r06_0kc .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令查询资源栈资源信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /stacks/[StackName]/[StackId]/resources
```

成功后输出资源栈资源信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***/resources

[
    {
        "Status": "CREATE_COMPLETE",
        "Updated": "2019-07-20T10:28:24",
        "Name": "Eip",
        "Created": "2019-07-20T10:28:22",
        "ResourceData": null,
        "PhysicalId": "***",
        "StatusReason": "state changed",
        "Deleted": null,
        "Type": "ALIYUN::VPC::EIP",
        "Id": "Eip"
    }
]
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***/resources

ERROR: SDK.ServerError
ErrorCode: StackNotFound
Recommend:
RequestId:
Message: The Stack (ros_test_cli_stack_name) could not be found.
```

## Describe Resource Types {#section_j0q_9vu_p2v .section}

使用如下命令查询所有可用的资源类型信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /resource_types
```

成功后输出所有资源类型信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /resource_types

{
    "ResourceTypes": [
        "ALIYUN::ACTIONTRAIL::Trail",
        "ALIYUN::ACTIONTRAIL::TrailLogging",
        "ALIYUN::ApiGateway::Api",
        "ALIYUN::ApiGateway::App",
        "ALIYUN::ApiGateway::Authorization",
        "ALIYUN::ApiGateway::CustomDomain",
        "ALIYUN::ApiGateway::Deployment",
        "ALIYUN::ApiGateway::Group",
        "ALIYUN::ApiGateway::Signature",
        "ALIYUN::ApiGateway::SignatureBinding",
        "ALIYUN::ApiGateway::StageConfig",
        "ALIYUN::ApiGateway::TrafficControl",
        "ALIYUN::ApiGateway::TrafficControlBinding",
        "ALIYUN::ApiGateway::VpcAccessConfig",
        "ALIYUN::BSS::WaitOrder",
        "ALIYUN::CDN::Domain",
        "ALIYUN::CDN::DomainConfig",
        "ALIYUN::CEN::CenBandwidthLimit",
        "ALIYUN::CEN::CenBandwidthPackage",
        "ALIYUN::CEN::CenBandwidthPackageAssociation",
        "ALIYUN::CEN::CenInstance",
        "ALIYUN::CEN::CenInstanceAttachment",
        "ALIYUN::CEN::RouteEntry",
        "ALIYUN::CMS::MonitorGroup",
        "ALIYUN::CS::App",
        "ALIYUN::CS::Cluster",
        "ALIYUN::DNS::Domain",
        "ALIYUN::DNS::DomainGroup",
        "ALIYUN::DNS::DomainRecord",
        "ALIYUN::ECS::AutoSnapshotPolicy",
        "ALIYUN::ECS::BandwidthPackage",
        "ALIYUN::ECS::Command",
        "ALIYUN::ECS::CopyImage",
        "ALIYUN::ECS::CustomImage",
        "ALIYUN::ECS::DedicatedHost",
        "ALIYUN::ECS::DeploymentSet",
        "ALIYUN::ECS::Disk",
        "ALIYUN::ECS::DiskAttachment",
        "ALIYUN::ECS::ForwardEntry",
        "ALIYUN::ECS::Instance",
        "ALIYUN::ECS::InstanceClone",
        "ALIYUN::ECS::InstanceGroup",
        "ALIYUN::ECS::InstanceGroupClone",
        "ALIYUN::ECS::Invocation",
        "ALIYUN::ECS::JoinSecurityGroup",
        "ALIYUN::ECS::LaunchTemplate",
        "ALIYUN::ECS::NatGateway",
        "ALIYUN::ECS::NetworkInterface",
        "ALIYUN::ECS::NetworkInterfaceAttachment",
        "ALIYUN::ECS::NetworkInterfacePermission",
        "ALIYUN::ECS::PrepayInstance",
        "ALIYUN::ECS::PrepayInstanceGroupClone",
        "ALIYUN::ECS::Route",
        "ALIYUN::ECS::SNatEntry",
        "ALIYUN::ECS::SSHKeyPair",
        "ALIYUN::ECS::SSHKeyPairAttachment",
        "ALIYUN::ECS::SecurityGroup",
        "ALIYUN::ECS::SecurityGroupClone",
        "ALIYUN::ECS::SecurityGroupEgress",
        "ALIYUN::ECS::SecurityGroupIngress",
        "ALIYUN::ECS::Snapshot",
        "ALIYUN::ECS::VPC",
        "ALIYUN::ECS::VSwitch",
        "ALIYUN::ESS::AlarmTask",
        "ALIYUN::ESS::AlarmTaskEnable",
        "ALIYUN::ESS::LifecycleHook",
        "ALIYUN::ESS::ScalingConfiguration",
        "ALIYUN::ESS::ScalingGroup",
        "ALIYUN::ESS::ScalingGroupEnable",
        "ALIYUN::ESS::ScalingRule",
        "ALIYUN::ESS::ScheduledTask",
        "ALIYUN::FC::Function",
        "ALIYUN::FC::FunctionInvoker",
        "ALIYUN::FC::Service",
        "ALIYUN::FC::Trigger",
        "ALIYUN::KMS::Alias",
        "ALIYUN::KMS::Key",
        "ALIYUN::MEMCACHE::Instance",
        "ALIYUN::MNS::Queue",
        "ALIYUN::MNS::Subscription",
        "ALIYUN::MNS::Topic",
        "ALIYUN::MONGODB::Instance",
        "ALIYUN::MONGODB::PrepayInstance",
        "ALIYUN::MarketPlace::Image",
        "ALIYUN::MarketPlace::Order",
        "ALIYUN::NAS::AccessGroup",
        "ALIYUN::NAS::AccessRule",
        "ALIYUN::NAS::FileSystem",
        "ALIYUN::NAS::MountTarget",
        "ALIYUN::OSS::Bucket",
        "ALIYUN::OTS::Instance",
        "ALIYUN::OTS::VpcBinder",
        "ALIYUN::PVTZ::Zone",
        "ALIYUN::PVTZ::ZoneRecord",
        "ALIYUN::PVTZ::ZoneVpcBinder",
        "ALIYUN::RAM::AccessKey",
        "ALIYUN::RAM::AttachPolicyToRole",
        "ALIYUN::RAM::Group",
        "ALIYUN::RAM::ManagedPolicy",
        "ALIYUN::RAM::Role",
        "ALIYUN::RAM::User",
        "ALIYUN::RAM::UserToGroupAddition",
        "ALIYUN::RDS::Account",
        "ALIYUN::RDS::AccountPrivilege",
        "ALIYUN::RDS::DBInstance",
        "ALIYUN::RDS::DBInstanceParameterGroup",
        "ALIYUN::RDS::DBInstanceSecurityIps",
        "ALIYUN::RDS::PrepayDBInstance",
        "ALIYUN::REDIS::Instance",
        "ALIYUN::REDIS::PrepayInstance",
        "ALIYUN::ROS::Stack",
        "ALIYUN::ROS::WaitCondition",
        "ALIYUN::ROS::WaitConditionHandle",
        "ALIYUN::SAG::ACL",
        "ALIYUN::SAG::ACLAssociation",
        "ALIYUN::SAG::ACLRule",
        "ALIYUN::SAG::CloudConnectNetwork",
        "ALIYUN::SAG::SmartAccessGatewayBinding",
        "ALIYUN::SLB::AccessControl",
        "ALIYUN::SLB::BackendServerAttachment",
        "ALIYUN::SLB::BackendServerToVServerGroupAddition",
        "ALIYUN::SLB::Certificate",
        "ALIYUN::SLB::DomainExtension",
        "ALIYUN::SLB::Listener",
        "ALIYUN::SLB::LoadBalancer",
        "ALIYUN::SLB::LoadBalancerClone",
        "ALIYUN::SLB::MasterSlaveServerGroup",
        "ALIYUN::SLB::Rule",
        "ALIYUN::SLB::VServerGroup",
        "ALIYUN::SLS::ApplyConfigToMachineGroup",
        "ALIYUN::SLS::MachineGroup",
        "ALIYUN::UIS::Uis",
        "ALIYUN::UIS::UisConnection",
        "ALIYUN::UIS::UisNode",
        "ALIYUN::VPC::EIP",
        "ALIYUN::VPC::EIPAssociation",
        "ALIYUN::VPC::PeeringRouterInterfaceBinding",
        "ALIYUN::VPC::PeeringRouterInterfaceConnection",
        "ALIYUN::VPC::RouterInterface",
        "ALIYUN::VPC::SnatEntry"
    ]
}
```

## Describe Resource Type Detail {#section_bi6_4ah_wue .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--TypeName`|指定资源类型的名称|必须给出|

使用如下命令查询资源类型详情信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /resource_types/[TypeName]
```

成功后返回资源类型信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /resource_types/ALIYUN::ROS::Stack

{
    "ResourceType": "ALIYUN::ROS::Stack",
    "Attributes": {},
    "Properties": {
        "TemplateURL": {
            "Description": "The URL of a template that specifies the stack to be created as a resource. Supported url schemas: https, https and oss. For example:\nhttp://www.my-site.com/simple-tpl\nhttps://www.my-site.com/simple-tpl\noss://stacks/simple-tpl",
            "Required": true,
            "UpdateAllowed": true,
            "Type": "string",
            "Immutable": false,
            "Constraints": [
                {
                    "Length": {
                        "Max": 1024
                    }
                }
            ]
        },
        "TimeoutMins": {
            "UpdateAllowed": true,
            "Required": true,
            "Type": "number",
            "Description": "The length of time, in minutes, to wait for the nested stack creation.",
            "Immutable": false
        },
        "Parameters": {
            "UpdateAllowed": true,
            "Required": false,
            "Type": "map",
            "Description": "The set of parameters passed to this nested stack.",
            "Immutable": false
        }
    },
    "SupportStatus": {
        "Status": "SUPPORTED",
        "Message": null,
        "Version": null
    }
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /resource_types/ALIYUN::ROS::Stack2

ERROR: SDK.ServerError
ErrorCode: ResourceTypeNotFound
Recommend:
RequestId:
Message: The Resource Type (ALIYUN::ROS::Stack2) could not be found.
```

## Describe Resource Type template {#section_rj5_2wd_rcp .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--TypeName`|指定资源类型的名称|必须给出|

使用如下命令查询资源类型模版信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /resource_types/[TypeName]/template
```

成功后返回资源类型的模版信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /resource_types/ALIYUN::ROS::Stack/template

{
    "ROSTemplateFormatVersion": "2015-09-01",
    "Resources": {
        "NestedStack": {
            "Type": "ALIYUN::ROS::Stack",
            "Properties": {
                "TemplateURL": {
                    "Ref": "TemplateURL"
                },
                "TimeoutMins": {
                    "Ref": "TimeoutMins"
                },
                "Parameters": {
                    "Ref": "Parameters"
                }
            }
        }
    },
    "Parameters": {
        "TemplateURL": {
            "Type": "String",
            "Description": "The URL of a template that specifies the stack to be created as a resource. Supported url schemas: https, https and oss. For example:\nhttp://www.my-site.com/simple-tpl\nhttps://www.my-site.com/simple-tpl\noss://stacks/simple-tpl",
            "MaxLength": 1024
        },
        "TimeoutMins": {
            "Type": "Number",
            "Description": "The length of time, in minutes, to wait for the nested stack creation."
        },
        "Parameters": {
            "Type": "Json",
            "Description": "The set of parameters passed to this nested stack."
        }
    },
    "Outputs": {}
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /resource_types/ALIYUN::ROS::Stack2/template

ERROR: SDK.ServerError
ErrorCode:
Recommend:
RequestId:
Message: {"message": "The Resource Type (ALIYUN::ROS::Stack2) could not be found.", "code": "ResourceTypeNotFound"}
```

## 模板相关 {#section_qaj_7p9_7o9 .section}

## Describe Template {#section_9z5_ol8_z3k .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令查询资源栈模版信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /stacks/[StackName]/[StackId]/template
```

获取成功后，输出资源栈模板，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***/template

{
    "ROSTemplateFormatVersion": "2015-09-01",
    "Resources": {
        "Eip": {
            "Type": "ALIYUN::VPC::EIP",
            "Properties": {
                "InternetChargeType": "PayByTraffic",
                "Bandwidth": 200
            }
        }
    },
    "Outputs": {
        "EipAddress": {
            "Value": {
                "Fn::GetAtt": [
                    "Eip",
                    "EipAddress"
                ]
            }
        },
        "AllocationId": {
            "Value": {
                "Fn::GetAtt": [
                    "Eip",
                    "AllocationId"
                ]
            }
        }
    }
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***/template

ERROR: SDK.ServerError
ErrorCode:
Recommend:
RequestId:
Message: {"message": "The Stack (ros_test_cli_stack_name) could not be found.", "code": "StackNotFound"}
```

## Validate Template {#section_xxv_lpu_g1p .section}

使用如下命令验证模版信息：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros POST /validate --body '{
  "Template": "[Template]",
  "Name": "[StackName]",
  "TimeoutMins": 10
}'
```

获取成功后，输出模板参数相关信息，否则输出错误信息。

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /validate --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-01"
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'


{
    "Description": "No description",
    "Parameters": {}
}
```

**失败示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros POST /validate --body '{
  "Template": {
    "ROSTemplateFormatVersion": "2015-09-02"
  },
  "Name": "ros_test_cli_stack_name",
  "TimeoutMins": 10
}'


ERROR: SDK.ServerError
ErrorCode: InvalidTemplateVersion
Recommend:
RequestId:
Message: The template version is invalid: "ROSTemplateFormatVersion: 2015-09-02". "ROSTemplateFormatVersion" should be: 2015-09-01
```

## 其他 {#section_ayy_r3p_fgq .section}

## Describe Regions {#section_92o_hwy_tnt .section}

使用如下命令查询所有的区域：

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /regions
```

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /regions

{
    "Regions": [
        {
            "LocalName": "华北 1",
            "RegionId": "cn-qingdao"
        },
        {
            "LocalName": "华北 2",
            "RegionId": "cn-beijing"
        },
        {
            "LocalName": "华北 3",
            "RegionId": "cn-zhangjiakou"
        },
        {
            "LocalName": "华北 5",
            "RegionId": "cn-huhehaote"
        },
        {
            "LocalName": "华东 1",
            "RegionId": "cn-hangzhou"
        },
        {
            "LocalName": "华东 2",
            "RegionId": "cn-shanghai"
        },
        {
            "LocalName": "华南 1",
            "RegionId": "cn-shenzhen"
        },
        {
            "LocalName": "西南1（成都）",
            "RegionId": "cn-chengdu"
        },
        {
            "LocalName": "香港",
            "RegionId": "cn-hongkong"
        },
        {
            "LocalName": "亚太东北 1 (东京)",
            "RegionId": "ap-northeast-1"
        },
        {
            "LocalName": "亚太东南 1 (新加坡)",
            "RegionId": "ap-southeast-1"
        },
        {
            "LocalName": "亚太东南 2 (悉尼)",
            "RegionId": "ap-southeast-2"
        },
        {
            "LocalName": "亚太东南 3 (吉隆坡)",
            "RegionId": "ap-southeast-3"
        },
        {
            "LocalName": "亚太东南 5 (雅加达)",
            "RegionId": "ap-southeast-5"
        },
        {
            "LocalName": "亚太南部 1 (孟买)",
            "RegionId": "ap-south-1"
        },
        {
            "LocalName": "美国东部 1 (弗吉尼亚)",
            "RegionId": "us-east-1"
        },
        {
            "LocalName": "美国西部 1 (硅谷)",
            "RegionId": "us-west-1"
        },
        {
            "LocalName": "英国 (伦敦)",
            "RegionId": "eu-west-1"
        },
        {
            "LocalName": "中东东部 1 (迪拜)",
            "RegionId": "me-east-1"
        },
        {
            "LocalName": "欧洲中部 1 (法兰克福)",
            "RegionId": "eu-central-1"
        }
    ]
}
```

## Describe Events {#section_o33_hae_5rg .section}

参数：

|命令|功能|备注|
|--|--|--|
|`--StackName`|指定资源栈的名称|必须给出|
|`--StackId`|指定资源栈的ID|必须给出|

使用如下命令查询资源栈事件信息:

``` {#codeblock_mxt_4ex_3w6 .language-bash}
aliyun ros GET /stacks/[StackName]/[StackId]/events
```

**成功示例**

``` {#codeblock_mxt_4ex_3w6 .language-bash}
$ aliyun ros GET /stacks/ros_test_cli_stack_name/***-**-**-**-***/events

{
  "TotalCount": 4,
  "PageNumber": 1,
  "Events": [
    {
      "Status": "CREATE_COMPLETE",
      "ResourceType": "ALIYUN::ROS::Stack",
      "ResourceId": "ros_test_cli_stack_name",
      "StatusReason": "Stack CREATE completed successfully",
      "Time": "2019-07-20T10:28:24",
      "ResourceName": "ros_test_cli_stack_name",
      "Id": "***-**-**-**-***",
      "ResourcePhysicalId": "***-**-**-**-***"
    },
    {
      "Status": "CREATE_COMPLETE",
      "ResourceType": "ALIYUN::VPC::EIP",
      "ResourceId": "Eip",
      "StatusReason": "state changed",
      "Time": "2019-07-20T10:28:24",
      "ResourceName": "Eip",
      "Id": "***-**-**-**-***",
      "ResourcePhysicalId": "eip-***"
    },
    {
      "Status": "CREATE_IN_PROGRESS",
      "ResourceType": "ALIYUN::VPC::EIP",
      "ResourceId": "Eip",
      "StatusReason": "state changed",
      "Time": "2019-07-20T10:28:22",
      "ResourceName": "Eip",
      "Id": "***-**-**-**-***",
      "ResourcePhysicalId": null
    },
    {
      "Status": "CREATE_IN_PROGRESS",
      "ResourceType": "ALIYUN::ROS::Stack",
      "ResourceId": "ros_test_cli_stack_name",
      "StatusReason": "Stack CREATE started",
      "Time": "2019-07-20T10:28:22",
      "ResourceName": "ros_test_cli_stack_name",
      "Id": "***-**-**-**-***",
      "ResourcePhysicalId": "***-**-**-**-***"
    }
  ],
  "PageSize": 10
}
```

