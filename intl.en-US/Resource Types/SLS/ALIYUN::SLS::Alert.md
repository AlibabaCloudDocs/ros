# ALIYUN::SLS::Alert

ALIYUN::SLS::Alert is used to create an alert rule.

## Syntax

```
{
  "Type": "ALIYUN::SLS::Alert",
  "Properties": {
    "Project": String,
    "Detail": Map
  }
}
```

## Properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Project|String|Yes|No|The name of the Log Service project.|None|
|Detail|Map|Yes|Yes|The details of the alert rule.|None|

## Detail syntax

```
"Detail": {
  "Type": String,
  "Description": String,
  "Configuration": Map,
  "State": String,
  "Schedule": Map,
  "DisplayName": String,
  "Name": String
}
```

## Detail properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Type|String|No|No|The type of the alert rule.|None|
|Description|String|No|Yes|The description of the alert rule.|None|
|Configuration|Map|Yes|Yes|The configurations of the alert rule.|For more information, see [Configuration properties](#section_nql_9cc_y8a).|
|State|String|No|No|Specifies whether to enable the alert rule.|Valid values:-   Enable
-   Disabled |
|Schedule|Map|Yes|Yes|The interval at which Log Service evaluates the alert rule.|When Log Service evaluates the alert rule, Log Service checks only the first 100 log entries if a query returns more than 100 log entries.For more information, see [Schedule properties](#section_ovp_1vg_fhp). |
|DisplayName|String|Yes|Yes|The display name you specify for the alert rule.|The name must be 1 to 64 characters in length.|
|Name|String|Yes|No|The name of the alert rule, which is generated by the system in the project.|None|

## Configuration syntax

```
"Configuration": {
  "Throttling": String,
  "Condition": String,
  "NotificationList": List,
  "NotifyThreshold": Integer,
  "Dashboard": String,
  "QueryList": List
}
```

## Configuration properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Throttling|String|Yes|Yes|The interval at which Log Service sends alert notifications.|None|
|Condition|String|Yes|Yes|The condition that is required to trigger an alert rule.|In a trigger condition, five basic operators are supported: plus \(+\), minus \(-\), multiplication \(\*\), division \(/\), and modulo \(%\). Eight comparison operators are supported: greater than \(\>\), greater than or equal to \(\>=\), less than \(<\), less than or equal to \(<=\), equal to \(==\), not equal to \(!=\), regex match \(=~\), and negated regex match \(!~\). For more information, see [Syntax of trigger conditions in alert rules](/intl.en-US/Query and visualization/Alarm/Relevant syntax and fields for reference/Syntax of trigger conditions in alert rules.md). |
|NotificationList|List|No|Yes|The list of one or more notifications.|For more information, see [NotificationList properties](#section_9gb_q4h_hsj).|
|NotifyThreshold|Integer|No|Yes|The threshold for accumulated number of alert rule evaluations in which the trigger condition is met before alert notifications are sent.|None|
|Dashboard|String|Yes|Yes|The dashboard with which the alert rule is associated.|None|
|QueryList|List|Yes|Yes|The list of one or more queries.|For more information, see [QueryList properties](#section_vjj_ndk_7n6).|

## NotificationList syntax

```
"NotificationList": [
  {
    "Type": String,
    "MobileList": List,
    "ServiceUri": String,
    "Content": String,
    "EmailList": List
  }
]
```

## NotificationList properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Type|String|Yes|No|The method of alert notification.|Valid values:-   Email: emails
-   MessageCenter: message center
-   DingTalk: DingTalk chatbot webhook
-   Webhook: custom webhook |
|Content|String|No|No|The content of the alert notification.|You can use the following system variables in the content: `${Project}, ${Condition}, ${AlertName}, ${AlertID}, ${Dashboard}, ${FireTime}, ${Results}`.For more information, see [Configure notification methods](/intl.en-US/Query and visualization/Alarm/Configure notification methods.md). |
|MobileList|List|No|No|The list of one or more phone numbers of the alert contact.|A mobile phone number receives a maximum of 50 text messages every day. |
|ServiceUri|String|No|No|The webhook URI.|This parameter is required when the Type parameter is set to DingTalk or Webhook.|
|EmailList|List|No|No|The list of one or more email addresses that receive the alert notification.|This parameter is required when the Type parameter is set to Email.An email address receives a maximum of 100 emails every day. |

## QueryList syntax

```
"QueryList": [
  {
    "Query": String,
    "LogStore": String,
    "Start": String,
    "TimeSpanType": String,
    "End": String,
    "ChartTitle": String
  }
]
```

## QueryList properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Query|String|Yes|No|The query statement in the alert rule.|None|
|LogStore|String|Yes|No|The Logstore for which the alert rule is created.|None|
|Start|String|Yes|No|The start time of the query time range.|None|
|TimeSpanType|String|Yes|No|The time range of the query.|None|
|End|String|Yes|No|The end time of the query time range.|None|
|ChartTitle|String|Yes|No|The name of the chart.|None|

## Schedule syntax

```
"Schedule": {
  "Type": String,
  "Interval": String
}
```

## Schedule properties

|Property|Type|Required|Editable|Description|Constraint|
|--------|----|--------|--------|-----------|----------|
|Type|String|Yes|Yes|The interval at which Log Service evaluates the alert rule.|Valid values:-   Hourly: every hour
-   Daily: every day
-   Weekly: every week
-   FixedRate: fixed interval
-   Cron: a cron expression |
|Interval|String|Yes|Yes|The interval at which Log Service sends alert notifications.|None|

## Response parameters

Fn::GetAtt

Name: the name of the alert rule.

## Examples

`JSON` format

```
{
  "ROSTemplateFormatVersion": "2015-09-01",
  "Parameters": {
    "Project": {
      "Type": "String",
      "Description": "Project name:\n1. Only supports lowercase letters, numbers, hyphens (-) and underscores (_).\n2. Must start and end with lowercase letters and numbers.\n3. The name length is 3-63 characters.",
      "AllowedPattern": "^[a-zA-Z0-9_-]+$",
      "MinLength": 3,
      "MaxLength": 63
    },
    "Detail": {
      "Type": "Json",
      "Description": ""
    }
  },
  "Resources": {
    "Alert": {
      "Type": "ALIYUN::SLS::Alert",
      "Properties": {
        "Project": {
          "Ref": "Project"
        },
        "Detail": {
          "Ref": "Detail"
        }
      }
    }
  },
  "Outputs": {
    "Name": {
      "Description": "Alert name.",
      "Value": {
        "Fn::GetAtt": [
          "Alert",
          "Name"
        ]
      }
    }
  }
}
```

`YAML` format

```
ROSTemplateFormatVersion: '2015-09-01'
Parameters:
  Project:
    Type: String
    Description: >-
      Project name:

      1. Only supports lowercase letters, numbers, hyphens (-) and underscores
      (_).

      2. Must start and end with lowercase letters and numbers.

      3. The name length is 3-63 characters.
    AllowedPattern: '^[a-zA-Z0-9_-]+$'
    MinLength: 3
    MaxLength: 63
  Detail:
    Type: Json
    Description: ''
Resources:
  Alert:
    Type: 'ALIYUN::SLS::Alert'
    Properties:
      Project:
        Ref: Project
      Detail:
        Ref: Detail
Outputs:
  Name:
    Description: Alert name.
    Value:
      'Fn::GetAtt':
        - Alert
        - Name
```

